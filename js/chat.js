document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("chatToggle"),t=document.getElementById("chatBox"),n=document.getElementById("chatInput"),a=document.getElementById("chatSend"),s=document.getElementById("chatMessages");function l(e,t){let n=document.createElement("div");n.className="msg "+t,n.textContent=e,s.appendChild(n),s.scrollTop=s.scrollHeight}function o(){let e=document.createElement("div");e.className="msg bot typing",e.innerHTML='<span class="dot"></span><span class="dot"></span><span class="dot"></span>',s.appendChild(e),s.scrollTop=s.scrollHeight}function c(){let e=document.querySelector(".typing");e&&e.remove()}e.addEventListener("click",()=>t.classList.toggle("hidden")),a.addEventListener("click",async()=>{let e=n.value.trim();if(e){l(e,"user"),n.value="",o();try{let t=await fetch("https://black-glade-5e5b.zonkeynet.workers.dev/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e})}),a=await t.text();c(),l(a,"bot")}catch(s){c(),l("Errore nella risposta.","bot")}}})});